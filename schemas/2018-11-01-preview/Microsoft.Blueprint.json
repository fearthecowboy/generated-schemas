{
  "id": "https://schema.management.azure.com/schemas/2018-11-01-preview/Microsoft.Blueprint.json#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Microsoft.Blueprint",
  "description": "Microsoft Blueprint Resource Types",
  "resourceDefinitions": {
    "blueprintAssignments": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "name of the assignment."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Blueprint/blueprintAssignments"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-11-01-preview"
          ]
        },
        "location": {
          "type": "string",
          "description": "The location of this Blueprint assignment."
        },
        "identity": {
          "oneOf": [
            {
              "$ref": "#/definitions/ManagedServiceIdentity"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Managed Service Identity"
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/AssignmentProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Detailed properties for Assignment."
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion",
        "location",
        "identity",
        "properties"
      ],
      "description": "Microsoft.Blueprint/blueprintAssignments"
    },
    "blueprints": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "name of the blueprint."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Blueprint/blueprints"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-11-01-preview"
          ]
        },
        "properties": {
          "oneOf": [
            {
              "$ref": "#/definitions/BlueprintProperties"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Schema for Blueprint properties."
        },
        "resources": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/blueprints_versions_childResource"
              },
              {
                "$ref": "#/definitions/blueprints_artifacts_childResource"
              }
            ]
          }
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion",
        "properties"
      ],
      "description": "Microsoft.Blueprint/blueprints"
    },
    "blueprints_artifacts": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "name of the artifact."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Blueprint/blueprints/artifacts"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-11-01-preview"
          ]
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion"
      ],
      "description": "Microsoft.Blueprint/blueprints/artifacts"
    },
    "blueprints_versions": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "version of the published blueprint."
        },
        "type": {
          "type": "string",
          "enum": [
            "Microsoft.Blueprint/blueprints/versions"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-11-01-preview"
          ]
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion"
      ],
      "description": "Microsoft.Blueprint/blueprints/versions"
    }
  },
  "definitions": {
    "AssignmentLockSettings": {
      "type": "object",
      "properties": {
        "mode": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "None",
                "AllResources"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Lock mode."
        }
      },
      "description": "Defines how Blueprint-managed resources will be locked."
    },
    "AssignmentProperties": {
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "maxLength": 256,
          "description": "One-liner string explain this resource."
        },
        "description": {
          "type": "string",
          "maxLength": 500,
          "description": "Multi-line explain this resource."
        },
        "blueprintId": {
          "type": "string",
          "description": "ID of the Blueprint definition resource."
        },
        "parameters": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/ParameterValueBase"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "A dictionary for parameters and their corresponding values."
        },
        "resourceGroups": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/ResourceGroupValue"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "A dictionary which maps resource group placeholders to the resource groups which will be created."
        },
        "locks": {
          "oneOf": [
            {
              "$ref": "#/definitions/AssignmentLockSettings"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Defines how Blueprint-managed resources will be locked."
        }
      },
      "required": [
        "parameters",
        "resourceGroups"
      ],
      "description": "Detailed properties for Assignment."
    },
    "BlueprintProperties": {
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "maxLength": 256,
          "description": "One-liner string explain this resource."
        },
        "description": {
          "type": "string",
          "maxLength": 500,
          "description": "Multi-line explain this resource."
        },
        "targetScope": {
          "oneOf": [
            {
              "type": "string",
              "enum": [
                "subscription",
                "managementGroup"
              ]
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "The scope where this Blueprint can be applied."
        },
        "parameters": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/ParameterDefinition"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "A dictionary hold parameter name and it's metadata."
        },
        "resourceGroups": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/ResourceGroupDefinition"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "A dictionary which maps resource group placeholders to the resource groups which will be created."
        },
        "versions": {
          "description": "Published versions of this blueprint."
        },
        "layout": {
          "description": "Layout view of the blueprint, for UI reference."
        }
      },
      "description": "Schema for Blueprint properties."
    },
    "blueprints_artifacts_childResource": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "name of the artifact."
        },
        "type": {
          "type": "string",
          "enum": [
            "artifacts"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-11-01-preview"
          ]
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion"
      ],
      "description": "Microsoft.Blueprint/blueprints/artifacts"
    },
    "blueprints_versions_childResource": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "version of the published blueprint."
        },
        "type": {
          "type": "string",
          "enum": [
            "versions"
          ]
        },
        "apiVersion": {
          "type": "string",
          "enum": [
            "2018-11-01-preview"
          ]
        }
      },
      "required": [
        "name",
        "type",
        "apiVersion"
      ],
      "description": "Microsoft.Blueprint/blueprints/versions"
    },
    "ManagedServiceIdentity": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "None",
            "SystemAssigned",
            "UserAssigned"
          ],
          "description": "Type of the Managed Service Identity."
        },
        "principalId": {
          "type": "string",
          "description": "Azure Active Directory principal ID associated with this Identity."
        },
        "tenantId": {
          "type": "string",
          "description": "ID of the Azure Active Directory."
        },
        "userAssignedIdentities": {
          "oneOf": [
            {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/UserAssignedIdentity"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "The list of user identities associated with the resource, key will be Azure resource Id of the ManagedIdentity."
        }
      },
      "required": [
        "type"
      ],
      "description": "Managed Service Identity"
    },
    "ParameterDefinition": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "string",
            "array",
            "bool",
            "int",
            "object",
            "secureObject",
            "secureString"
          ],
          "description": "Allowed data types for Azure Resource Manager template parameters."
        },
        "metadata": {
          "oneOf": [
            {
              "$ref": "#/definitions/ParameterDefinitionMetadata"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "User-friendly properties for this parameter."
        },
        "defaultValue": {
          "description": "Default Value for this parameter."
        },
        "allowedValues": {
          "oneOf": [
            {
              "type": "array",
              "items": {}
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Array of allowed values for this parameter."
        }
      },
      "required": [
        "type"
      ],
      "description": "Represent a parameter with constrains and metadata."
    },
    "ParameterDefinitionMetadata": {
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "maxLength": 256,
          "description": "DisplayName of this parameter/resourceGroup."
        },
        "description": {
          "type": "string",
          "maxLength": 500,
          "description": "Description of this parameter/resourceGroup."
        },
        "strongType": {
          "type": "string",
          "maxLength": 64,
          "description": "StrongType for UI to render rich experience during assignment time."
        }
      },
      "description": "User-friendly properties for this parameter."
    },
    "ParameterValueBase": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string",
          "description": "Optional property, just to establish ParameterValueBase as a BaseClass."
        }
      },
      "description": "Base class for ParameterValue."
    },
    "ResourceGroupDefinition": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 90,
          "description": "Name of this resourceGroup, leave empty if the resource group name will be specified during the Blueprint assignment."
        },
        "location": {
          "type": "string",
          "maxLength": 90,
          "description": "Location of this resourceGroup, leave empty if the resource group location will be specified during the Blueprint assignment."
        },
        "metadata": {
          "oneOf": [
            {
              "$ref": "#/definitions/ParameterDefinitionMetadata"
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "User-friendly properties for this parameter."
        },
        "dependsOn": {
          "oneOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#/definitions/expression"
            }
          ],
          "description": "Artifacts which need to be deployed before this resource group."
        }
      },
      "description": "Represents an Azure resource group in a Blueprint definition."
    },
    "ResourceGroupValue": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 90,
          "description": "Name of the resource group"
        },
        "location": {
          "type": "string",
          "description": "Location of the resource group"
        }
      },
      "description": "Represents an Azure resource group."
    },
    "UserAssignedIdentity": {
      "type": "object",
      "properties": {
        "principalId": {
          "type": "string",
          "description": "Azure Active Directory principal ID associated with this Identity."
        },
        "clientId": {
          "type": "string",
          "description": "Client App Id associated with this identity."
        }
      },
      "description": "User assigned Identity"
    }
  }
}
